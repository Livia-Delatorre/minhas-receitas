<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meu Livro de Receitas</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #d4cbbc;
            min-height: 100vh;
            padding: 20px;
        }

        header {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        h1 {
            color: #333;
            font-size: 2em;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            transition: transform 0.2s;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
        }

        .filtros {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .filtros input, .filtros select {
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            flex: 1;
            min-width: 200px;
        }

        .receitas-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }

        .card-receita {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            transition: transform 0.2s;
            cursor: pointer;
        }

        .card-receita:hover {
            transform: translateY(-5px);
        }

        .card-receita h3 {
            color: #333;
            margin-bottom: 10px;
            font-size: 1.3em;
        }

        .card-receita .categoria {
            background: #f0f0f0;
            padding: 5px 10px;
            border-radius: 15px;
            display: inline-block;
            font-size: 0.9em;
            margin-bottom: 15px;
        }

        .card-receita .status {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin: 15px 0;
            font-size: 1.1em;
        }

        .feito {
            color: #4CAF50;
        }

        .nao-feito {
            color: #f44336;
        }

        .avaliacao {
            display: flex;
            gap: 5px;
            margin: 10px 0;
        }

        .star {
            color: #ddd;
            cursor: pointer;
            font-size: 1.5em;
            transition: color 0.2s;
        }

        .star.active {
            color: #ffd700;
        }

        .btn-checkbox {
            width: 30px;
            height: 30px;
            border: 2px solid #ddd;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2em;
            transition: all 0.2s;
        }

        .btn-checkbox.feito {
            background: #4CAF50;
            border-color: #4CAF50;
            color: white;
        }

        .btn-checkbox.nao-feito {
            background: white;
            color: #f44336;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }

        .modal-content {
            background-color: white;
            margin: 50px auto;
            padding: 20px;
            border-radius: 10px;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
        }

        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }

        .close:hover {
            color: black;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            color: #333;
            font-weight: bold;
        }

        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        .ingrediente-item {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
        }

        .ingrediente-item input {
            flex: 1;
        }

        .btn-remover {
            background: #f44336;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 4px;
            cursor: pointer;
        }

        .btn-add {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 4px;
            cursor: pointer;
            margin-top: 10px;
        }

        .ingrediente-checkbox {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 5px 0;
        }

        .ingrediente-checkbox input[type="checkbox"] {
            width: auto;
        }

        .ingrediente-marcado {
            text-decoration: line-through;
            color: #888;
        }

        @media (max-width: 768px) {
            .receitas-grid {
                grid-template-columns: 1fr;
            }
            
            .filtros {
                flex-direction: column;
            }
            
            .modal-content {
                margin: 20px;
                width: auto;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>üìñ Meu Livro de Receitas</h1>
        <button id="btnNovaReceita" class="btn-primary">+ Nova Receita</button>
    </header>

    <main>
        <div class="filtros">
            <input type="text" id="busca" placeholder="Buscar receitas...">
            <select id="filtroCategoria">
                <option value="todas">Todas as categorias</option>
                <option value="cafe">Caf√© da manh√£</option>
                <option value="almoco">Almo√ßo</option>
                <option value="jantar">Jantar</option>
                <option value="sobremesa">Sobremesa</option>
            </select>
            <select id="filtroStatus">
                <option value="todas">Todas</option>
                <option value="feito">Feitas</option>
                <option value="nao-feito">N√£o feitas</option>
            </select>
        </div>

        <div id="receitasContainer" class="receitas-grid">
            <!-- Receitas ser√£o inseridas aqui via JavaScript -->
        </div>
    </main>

    <!-- Modal Nova Receita -->
    <div id="modalReceita" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Nova Receita</h2>
            <form id="formReceita">
                <div class="form-group">
                    <label for="titulo">T√≠tulo da Receita:</label>
                    <input type="text" id="titulo" required>
                </div>

                <div class="form-group">
                    <label for="categoria">Categoria:</label>
                    <select id="categoria" required>
                        <option value="cafe">Caf√© da manh√£</option>
                        <option value="almoco">Almo√ßo</option>
                        <option value="jantar">Jantar</option>
                        <option value="sobremesa">Sobremesa</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Ingredientes:</label>
                    <div id="ingredientesLista">
                        <div class="ingrediente-item">
                            <input type="text" placeholder="Ex: 2 x√≠caras de farinha" required>
                            <button type="button" class="btn-remover" onclick="removerIngrediente(this)">√ó</button>
                        </div>
                    </div>
                    <button type="button" class="btn-add" onclick="adicionarIngrediente()">+ Adicionar Ingrediente</button>
                </div>

                <div class="form-group">
                    <label for="modoPreparo">Modo de Preparo:</label>
                    <textarea id="modoPreparo" rows="5" required></textarea>
                </div>

                <button type="submit" class="btn-primary">Salvar Receita</button>
            </form>
        </div>
    </div>

    <!-- Modal Detalhes da Receita -->
    <div id="modalDetalhes" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <div id="detalhesReceita"></div>
        </div>
    </div>
<script>
    // Inicializa√ß√£o
    let receitas = JSON.parse(localStorage.getItem('receitas')) || [];

    // Elementos DOM
    const receitasContainer = document.getElementById('receitasContainer');
    const modalReceita = document.getElementById('modalReceita');
    const modalDetalhes = document.getElementById('modalDetalhes');
    const btnNovaReceita = document.getElementById('btnNovaReceita');
    const formReceita = document.getElementById('formReceita');
    const buscaInput = document.getElementById('busca');
    const filtroCategoria = document.getElementById('filtroCategoria');
    const filtroStatus = document.getElementById('filtroStatus');

    // Event Listeners
    btnNovaReceita.onclick = () => modalReceita.style.display = 'block';
    
    document.querySelectorAll('.close').forEach(closeBtn => {
        closeBtn.onclick = function() {
            modalReceita.style.display = 'none';
            modalDetalhes.style.display = 'none';
        }
    });

    window.onclick = (event) => {
        if (event.target == modalReceita) modalReceita.style.display = 'none';
        if (event.target == modalDetalhes) modalDetalhes.style.display = 'none';
    }

    buscaInput.addEventListener('input', renderizarReceitas);
    filtroCategoria.addEventListener('change', renderizarReceitas);
    filtroStatus.addEventListener('change', renderizarReceitas);

    formReceita.onsubmit = (e) => {
        e.preventDefault();
        salvarReceita();
    };

    // Tornar fun√ß√µes globais para serem acessadas pelos bot√µes
    window.adicionarIngrediente = function() {
        const lista = document.getElementById('ingredientesLista');
        const div = document.createElement('div');
        div.className = 'ingrediente-item';
        div.innerHTML = `
            <input type="text" placeholder="Ex: 2 x√≠caras de farinha" required>
            <button type="button" class="btn-remover" onclick="removerIngrediente(this)">√ó</button>
        `;
        lista.appendChild(div);
    }

    window.removerIngrediente = function(botao) {
        botao.parentElement.remove();
    }

    function salvarReceita() {
        const ingredientes = [];
        document.querySelectorAll('#ingredientesLista input').forEach(input => {
            if (input.value.trim() !== '') {
                ingredientes.push({
                    texto: input.value,
                    marcado: false
                });
            }
        });

        // Verificar se tem pelo menos um ingrediente
        if (ingredientes.length === 0) {
            alert('Adicione pelo menos um ingrediente!');
            return;
        }

        const novaReceita = {
            id: Date.now(),
            titulo: document.getElementById('titulo').value,
            categoria: document.getElementById('categoria').value,
            ingredientes: ingredientes,
            modoPreparo: document.getElementById('modoPreparo').value,
            status: 'nao-feito',
            avaliacao: 0,
            dataCriacao: new Date().toISOString()
        };

        receitas.push(novaReceita);
        localStorage.setItem('receitas', JSON.stringify(receitas));
        
        modalReceita.style.display = 'none';
        formReceita.reset();
        
        // Reset da lista de ingredientes
        document.getElementById('ingredientesLista').innerHTML = `
            <div class="ingrediente-item">
                <input type="text" placeholder="Ex: 2 x√≠caras de farinha" required>
                <button type="button" class="btn-remover" onclick="removerIngrediente(this)">√ó</button>
            </div>
        `;
        
        renderizarReceitas();
    }

    function renderizarReceitas() {
        const busca = buscaInput.value.toLowerCase();
        const categoria = filtroCategoria.value;
        const status = filtroStatus.value;

        let receitasFiltradas = receitas.filter(receita => {
            const matchBusca = receita.titulo.toLowerCase().includes(busca);
            const matchCategoria = categoria === 'todas' || receita.categoria === categoria;
            const matchStatus = status === 'todas' || 
                               (status === 'feito' && receita.status === 'feito') ||
                               (status === 'nao-feito' && receita.status === 'nao-feito');
            
            return matchBusca && matchCategoria && matchStatus;
        });

        if (receitasFiltradas.length === 0) {
            receitasContainer.innerHTML = '<p style="color: white; text-align: center; grid-column: 1/-1;">Nenhuma receita encontrada. Clique em "Nova Receita" para come√ßar!</p>';
            return;
        }

        receitasContainer.innerHTML = receitasFiltradas.map(receita => `
            <div class="card-receita" onclick="abrirDetalhes(${receita.id})">
                <h3>${receita.titulo}</h3>
                <span class="categoria">${getCategoriaLabel(receita.categoria)}</span>
                
                <div class="avaliacao" onclick="event.stopPropagation()">
                    ${gerarEstrelas(receita.id, receita.avaliacao)}
                </div>
                
                <div class="status">
                    <span class="${receita.status}">
                        ${receita.status === 'feito' ? '‚úì Feita' : '‚úó N√£o feita'}
                    </span>
                    <div class="btn-checkbox ${receita.status}" 
                         onclick="event.stopPropagation(); window.toggleStatus(${receita.id})">
                        ${receita.status === 'feito' ? '‚úì' : '‚úó'}
                    </div>
                </div>
                
                <div style="font-size: 0.9em; color: #666;">
                    ${receita.ingredientes.length} ingredientes
                </div>
            </div>
        `).join('');
    }

    function getCategoriaLabel(categoria) {
        const labels = {
            'cafe': '‚òï Caf√© da manh√£',
            'almoco': 'üçõ Almo√ßo',
            'jantar': 'üçΩÔ∏è Jantar',
            'sobremesa': 'üç∞ Sobremesa'
        };
        return labels[categoria] || categoria;
    }

    function gerarEstrelas(receitaId, avaliacao) {
        let estrelas = '';
        for (let i = 1; i <= 5; i++) {
            estrelas += `<span class="star ${i <= avaliacao ? 'active' : ''}" 
                               onclick="event.stopPropagation(); window.avaliarReceita(${receitaId}, ${i})">‚òÖ</span>`;
        }
        return estrelas;
    }

    window.avaliarReceita = function(id, nota) {
        const receita = receitas.find(r => r.id === id);
        if (receita) {
            receita.avaliacao = nota;
            localStorage.setItem('receitas', JSON.stringify(receitas));
            renderizarReceitas();
        }
    }

    window.toggleStatus = function(id) {
        const receita = receitas.find(r => r.id === id);
        if (receita) {
            receita.status = receita.status === 'feito' ? 'nao-feito' : 'feito';
            localStorage.setItem('receitas', JSON.stringify(receitas));
            renderizarReceitas();
            
            if (modalDetalhes.style.display === 'block') {
                abrirDetalhes(id);
            }
        }
    }

    window.abrirDetalhes = function(id) {
        const receita = receitas.find(r => r.id === id);
        if (!receita) return;

        const detalhesDiv = document.getElementById('detalhesReceita');
        
        detalhesDiv.innerHTML = `
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h2 style="margin: 0;">${receita.titulo}</h2>
                <span class="categoria">${getCategoriaLabel(receita.categoria)}</span>
            </div>
            
            <div class="avaliacao" style="justify-content: center; margin: 20px 0;">
                ${gerarEstrelas(receita.id, receita.avaliacao)}
            </div>
            
            <div style="margin: 20px 0; padding: 15px; background: #f5f5f5; border-radius: 8px;">
                <h3 style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                    Status:
                    <div class="btn-checkbox ${receita.status}" 
                         onclick="window.toggleStatus(${receita.id})" 
                         style="display: inline-flex;">
                        ${receita.status === 'feito' ? '‚úì' : '‚úó'}
                    </div>
                </h3>
                <span class="${receita.status}" style="font-size: 1.1em;">
                    ${receita.status === 'feito' ? '‚úì Receita j√° foi feita' : '‚úó Receita ainda n√£o foi feita'}
                </span>
            </div>
            
            <div style="margin: 20px 0;">
                <h3>üìù Ingredientes:</h3>
                ${receita.ingredientes.map((ing, index) => `
                    <div class="ingrediente-checkbox" style="margin: 10px 0;">
                        <input type="checkbox" 
                               ${ing.marcado ? 'checked' : ''} 
                               onchange="window.marcarIngrediente(${receita.id}, ${index}, this.checked)"
                               id="ing_${index}">
                        <label for="ing_${index}" class="${ing.marcado ? 'ingrediente-marcado' : ''}" 
                               style="cursor: pointer;">
                            ${ing.texto}
                        </label>
                    </div>
                `).join('')}
            </div>
            
            <div style="margin: 20px 0;">
                <h3>üë©‚Äçüç≥ Modo de Preparo:</h3>
                <p style="white-space: pre-line; background: #f9f9f9; padding: 15px; border-radius: 8px;">
                    ${receita.modoPreparo}
                </p>
            </div>
            
            <div style="display: flex; gap: 10px; margin-top: 30px;">
                <button class="btn-primary" onclick="window.editarReceita(${receita.id})" style="flex: 1;">
                    ‚úèÔ∏è Editar Receita
                </button>
                <button class="btn-remover" onclick="window.excluirReceita(${receita.id})" style="flex: 1;">
                    üóëÔ∏è Excluir
                </button>
            </div>
        `;
        
        modalDetalhes.style.display = 'block';
    }

    window.marcarIngrediente = function(receitaId, index, marcado) {
        const receita = receitas.find(r => r.id === receitaId);
        if (receita && receita.ingredientes[index]) {
            receita.ingredientes[index].marcado = marcado;
            localStorage.setItem('receitas', JSON.stringify(receitas));
            abrirDetalhes(receitaId);
        }
    }

    window.editarReceita = function(id) {
        const receita = receitas.find(r => r.id === id);
        if (!receita) return;
        
        // Fechar modal de detalhes
        modalDetalhes.style.display = 'none';
        
        // Preencher o formul√°rio com os dados da receita
        document.getElementById('titulo').value = receita.titulo;
        document.getElementById('categoria').value = receita.categoria;
        document.getElementById('modoPreparo').value = receita.modoPreparo;
        
        // Limpar e recriar a lista de ingredientes
        const lista = document.getElementById('ingredientesLista');
        lista.innerHTML = '';
        
        receita.ingredientes.forEach(ing => {
            const div = document.createElement('div');
            div.className = 'ingrediente-item';
            div.innerHTML = `
                <input type="text" value="${ing.texto}" required>
                <button type="button" class="btn-remover" onclick="removerIngrediente(this)">√ó</button>
            `;
            lista.appendChild(div);
        });
        
        // Remover a receita antiga (ser√° substitu√≠da pela vers√£o editada)
        receitas = receitas.filter(r => r.id !== id);
        
        // Abrir o modal de edi√ß√£o
        modalReceita.style.display = 'block';
        
        // Mudar o texto do bot√£o de salvar
        const salvarBtn = document.querySelector('#formReceita .btn-primary');
        salvarBtn.textContent = 'Atualizar Receita';
        
        // Remover o event listener anterior e adicionar um tempor√°rio
        formReceita.onsubmit = function(e) {
            e.preventDefault();
            atualizarReceita(id);
        };
    }

    function atualizarReceita(idAntigo) {
        const ingredientes = [];
        document.querySelectorAll('#ingredientesLista input').forEach(input => {
            if (input.value.trim() !== '') {
                ingredientes.push({
                    texto: input.value,
                    marcado: false
                });
            }
        });

        if (ingredientes.length === 0) {
            alert('Adicione pelo menos um ingrediente!');
            return;
        }

        const receitaAtualizada = {
            id: idAntigo, // Manter o mesmo ID
            titulo: document.getElementById('titulo').value,
            categoria: document.getElementById('categoria').value,
            ingredientes: ingredientes,
            modoPreparo: document.getElementById('modoPreparo').value,
            status: 'nao-feito',
            avaliacao: 0,
            dataCriacao: new Date().toISOString()
        };

        receitas.push(receitaAtualizada);
        localStorage.setItem('receitas', JSON.stringify(receitas));
        
        // Resetar o formul√°rio
        modalReceita.style.display = 'none';
        formReceita.reset();
        document.getElementById('ingredientesLista').innerHTML = `
            <div class="ingrediente-item">
                <input type="text" placeholder="Ex: 2 x√≠caras de farinha" required>
                <button type="button" class="btn-remover" onclick="removerIngrediente(this)">√ó</button>
            </div>
        `;
        
        // Restaurar o texto do bot√£o
        const salvarBtn = document.querySelector('#formReceita .btn-primary');
        salvarBtn.textContent = 'Salvar Receita';
        
        // Restaurar o event listener original
        formReceita.onsubmit = (e) => {
            e.preventDefault();
            salvarReceita();
        };
        
        renderizarReceitas();
    }

    window.excluirReceita = function(id) {
        if (confirm('Tem certeza que deseja excluir esta receita?')) {
            receitas = receitas.filter(r => r.id !== id);
            localStorage.setItem('receitas', JSON.stringify(receitas));
            modalDetalhes.style.display = 'none';
            renderizarReceitas();
        }
    }

    // Renderizar receitas ao carregar a p√°gina
    renderizarReceitas();
</script>

</body>

</html>

